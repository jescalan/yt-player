function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function e(t,e){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,e&&(o.onload=function(){o.onerror=o.onload=null,e(null,o)},o.onerror=function(){o.onerror=o.onload=null,e(new Error("Failed to load "+t),o)}),i.appendChild(o)}var i=t(require("events")),o=e,n="https://www.youtube.com/iframe_api",r={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"cued"},a={INVALID_PARAM:2,HTML5_ERROR:5,NOT_FOUND:100,UNPLAYABLE_1:101,UNPLAYABLE_2:150},s=[],u=function(t){function e(e,i){var o=this;t.call(this);var n="string"==typeof e?document.querySelector(e):e;n.id?this._id=n.id:this._id=n.id="ytplayer-"+Math.random().toString(16).slice(2,8),this._opts=Object.assign({width:640,height:360,autoplay:!1,captions:void 0,controls:!0,keyboard:!0,fullscreen:!0,annotations:!0,modestBranding:!1,related:!0,info:!0,timeupdateFrequency:1e3},i),this.videoId=null,this.destroyed=!1,this._api=null,this._player=null,this._ready=!1,this._queue=[],this._interval=null,this._startInterval=this._startInterval.bind(this),this._stopInterval=this._stopInterval.bind(this),this.on("unstarted",this._stopInterval),this.on("ended",this._stopInterval),this.on("playing",this._startInterval),this.on("paused",this._stopInterval),this.on("buffering",this._stopInterval),this._loadIframeAPI(function(t,e){if(t)return o._destroy(new Error("YouTube Iframe API failed to load"));o._api=e,o.videoId&&o.load(o.videoId)})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t,e){if(!this.destroyed&&(null==e&&(e=!0),this.videoId=t,this._api))return this._player?void(this._ready&&(e?this._player.loadVideoById(t):this._player.cueVideoById(t))):(this._createPlayer(t),this.emit("unstarted"),void this.emit("buffering"))},e.prototype.play=function(){this._ready?this._player.playVideo():this._queueCommand("play")},e.prototype.pause=function(){this._ready?this._player.pauseVideo():this._queueCommand("pause")},e.prototype.stop=function(){this._ready?this._player.stopVideo():this._queueCommand("stop")},e.prototype.seek=function(t){this._ready?this._player.seekTo(t,!0):this._queueCommand("seek",t)},e.prototype.setVolume=function(t){this._ready?this._player.setVolume(t):this._queueCommand("setVolume",t)},e.prototype.setPlaybackRate=function(t){this._ready?this._player.setPlaybackRate(t):this._queueCommand("setPlaybackRate",t)},e.prototype.getVolume=function(){return this._ready&&this._player.getVolume()||0},e.prototype.getPlaybackRate=function(){return this._ready&&this._player.getPlaybackRate()||1},e.prototype.getAvailablePlaybackRates=function(){return this._ready&&this._player.getAvailablePlaybackRates()||[1]},e.prototype.getDuration=function(){return this._ready&&this._player.getDuration()||0},e.prototype.getProgress=function(){return this._ready&&this._player.getVideoLoadedFraction()||0},e.prototype.getState=function(){return this._ready&&r[this._player.getPlayerState()]||"unstarted"},e.prototype.getCurrentTime=function(){return this._ready&&this._player.getCurrentTime()||0},e.prototype.destroy=function(){this._destroy()},e.prototype._destroy=function(t){this.destroyed||(this.destroyed=!0,this._player&&(this._player.stopVideo(),this._player.destroy()),this.videoId=null,this._id=null,this._opts=null,this._api=null,this._player=null,this._ready=!1,this._queue=null,this._stopInterval(),this._interval=!1,this.removeListener("playing",this._startInterval),this.removeListener("paused",this._stopInterval),this.removeListener("buffering",this._stopInterval),this.removeListener("unstarted",this._stopInterval),this.removeListener("ended",this._stopInterval),t&&this.emit("error",t))},e.prototype._queueCommand=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];this.destroyed||this._queue.push([t,e])},e.prototype._flushQueue=function(){for(;this._queue.length;){var t=this._queue.shift();this[t[0]].apply(this,t[1])}},e.prototype._loadIframeAPI=function(t){if(window.YT&&"function"==typeof window.YT.Player)return t(null,window.YT);s.push(t);Array.from(document.getElementsByTagName("script")).some(function(t){return t.src===n})||o(n,function(t){if(t)for(;s.length;){s.shift()(t)}}),"function"!=typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=function(){for(;s.length;){s.shift()(null,window.YT)}})},e.prototype._createPlayer=function(t){var e=this;if(!this.destroyed){var i=this._opts;this._player=new this._api.Player(this._id,{width:i.width,height:i.height,videoId:t,playerVars:{autoplay:i.autoplay?1:0,cc_load_policy:null!=i.captions?i.captions?1:0:void 0,controls:i.controls?2:0,disablekb:i.keyboard?0:1,enablejsapi:1,fs:i.fullscreen?1:0,iv_load_policy:i.annotations?1:3,modestbranding:1,origin:window.location.origin,playsinline:1,rel:i.related?1:0,showinfo:i.info?1:0,wmode:"opaque"},events:{onReady:function(){return e._onReady(t)},onStateChange:function(t){return e._onStateChange(t)},onPlaybackQualityChange:function(t){return e._onPlaybackQualityChange(t)},onPlaybackRateChange:function(t){return e._onPlaybackRateChange(t)},onError:function(t){return e._onError(t)}}})}},e.prototype._onReady=function(t){this.destroyed||(this._ready=!0,t!==this.videoId&&this.load(this.videoId),this._flushQueue())},e.prototype._onStateChange=function(t){if(!this.destroyed){var e=r[t.data];if(!e)throw new Error("Unrecognized state change: "+t);["paused"].includes(e)&&this._onTimeupdate(),this.emit(e),"playing"===e&&this._onTimeupdate()}},e.prototype._onPlaybackQualityChange=function(t){this.destroyed||this.emit("playbackQualityChange",t.data)},e.prototype._onPlaybackRateChange=function(t){this.destroyed||this.emit("playbackRateChange",t.data)},e.prototype._onError=function(t){if(!this.destroyed){var e=t.data;if(e!==a.HTML5_ERROR)return e===a.UNPLAYABLE_1||e===a.UNPLAYABLE_2||e===a.NOT_FOUND||e===a.INVALID_PARAM?this.emit("unplayable",this.videoId):void this._destroy(new Error("YouTube Player Error. Unknown error code: "+e))}},e.prototype._onTimeupdate=function(){this.emit("timeupdate",this.getCurrentTime())},e.prototype._startInterval=function(){var t=this;this._interval=setInterval(function(){return t._onTimeupdate()},this._opts.timeupdateFrequency)},e.prototype._stopInterval=function(){clearInterval(this._interval),this._interval=null},e}(i);module.exports=u;
//# sourceMappingURL=index.js.map
